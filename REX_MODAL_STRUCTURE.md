# Rex Modal Structure Reference

## Visual Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   [Rex Character]                                                   â”‚
â”‚   (Animated, floating                                               â”‚
â”‚    outside modal)              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚                      â”‚        MODAL WINDOW           â”‚   â”‚
â”‚         â”‚  â†â”€ connection       â”‚                               â”‚   â”‚
â”‚         â”‚     line             â”‚  [Header]                     â”‚   â”‚
â”‚                                â”‚  â€¢ Dynamic title              â”‚   â”‚
â”‚                                â”‚  â€¢ View toggle (S/D/F)        â”‚   â”‚
â”‚                                â”‚  â€¢ Close button               â”‚   â”‚
â”‚                                â”‚                               â”‚   â”‚
â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚                                â”‚  â”‚  Hero Statement         â”‚ â”‚   â”‚
â”‚                                â”‚  â”‚  âœ¨ Big, bold finding  â”‚ â”‚   â”‚
â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚                                â”‚                               â”‚   â”‚
â”‚                                â”‚  [Data Section]               â”‚   â”‚
â”‚                                â”‚  â€¢ Analysis paragraph         â”‚   â”‚
â”‚                                â”‚  â€¢ 3 cards (Simple)           â”‚   â”‚
â”‚                                â”‚  â€¢ Full breakdown (Detailed)  â”‚   â”‚
â”‚                                â”‚  â€¢ Flow diagram (Flow)        â”‚   â”‚
â”‚                                â”‚                               â”‚   â”‚
â”‚                                â”‚  [Actions Section]            â”‚   â”‚
â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                                â”‚  â”‚ â¬† Primary Action    âž¤â”‚   â”‚   â”‚
â”‚                                â”‚  â”‚ Bold, rose border     â”‚   â”‚   â”‚
â”‚                                â”‚  â”‚ Impact: +$X revenue   â”‚   â”‚   â”‚
â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                                â”‚  â”‚ Secondary Action     âž¤â”‚   â”‚   â”‚
â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                                â”‚                               â”‚   â”‚
â”‚                                â”‚  [Optional Automation]        â”‚   â”‚
â”‚                                â”‚  ðŸ’¡ "Want me to watch..."     â”‚   â”‚
â”‚                                â”‚  [Create Rule Button]         â”‚   â”‚
â”‚                                â”‚                               â”‚   â”‚
â”‚                                â”‚  [Dismiss]                    â”‚   â”‚
â”‚                                â”‚  "I'll handle this myself"    â”‚   â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
ComprehensiveRexInsightsModal
â”œâ”€â”€ RexCharacter (positioned outside, fixed)
â”‚   â””â”€â”€ Emotion-based animations
â”‚
â””â”€â”€ Modal
    â”œâ”€â”€ Header
    â”‚   â”œâ”€â”€ Rex Avatar (mobile only)
    â”‚   â”œâ”€â”€ Dynamic Title
    â”‚   â”œâ”€â”€ View Mode Toggle
    â”‚   â”‚   â”œâ”€â”€ Simple
    â”‚   â”‚   â”œâ”€â”€ Detailed
    â”‚   â”‚   â””â”€â”€ Flow
    â”‚   â””â”€â”€ Close Button
    â”‚
    â”œâ”€â”€ Hero Statement
    â”‚   â””â”€â”€ Primary Insight (bold, prominent)
    â”‚
    â”œâ”€â”€ Content Views
    â”‚   â”œâ”€â”€ Simple View
    â”‚   â”‚   â”œâ”€â”€ Section Header + Analysis
    â”‚   â”‚   â””â”€â”€ 3 Data Cards
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Detailed View
    â”‚   â”‚   â”œâ”€â”€ Demographics Section
    â”‚   â”‚   â”œâ”€â”€ Geographic Section
    â”‚   â”‚   â”œâ”€â”€ Placements Section
    â”‚   â”‚   â”œâ”€â”€ Temporal Section
    â”‚   â”‚   â””â”€â”€ Customer Behavior Section
    â”‚   â”‚
    â”‚   â””â”€â”€ Flow View
    â”‚       â””â”€â”€ RexFlowDiagram
    â”‚           â”œâ”€â”€ Data Collection
    â”‚           â”œâ”€â”€ Pattern Detection
    â”‚           â”œâ”€â”€ Analysis
    â”‚           â”œâ”€â”€ Recommendation
    â”‚           â””â”€â”€ Expected Outcome
    â”‚
    â”œâ”€â”€ Actions Section
    â”‚   â””â”€â”€ Vertical List
    â”‚       â”œâ”€â”€ Primary Action (rose border)
    â”‚       â”œâ”€â”€ Secondary Action(s)
    â”‚       â””â”€â”€ Each shows: Icon, Title, Description, Impact
    â”‚
    â”œâ”€â”€ Optional Automation Callout
    â”‚   â”œâ”€â”€ Conversational Header
    â”‚   â”œâ”€â”€ Rule Summary
    â”‚   â””â”€â”€ Create Rule Button
    â”‚
    â””â”€â”€ Dismiss Link
        â””â”€â”€ Subtle underlined text
```

## Data Flow

```
Insight Data
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Determine Rex Emotion             â”‚
â”‚ â€¢ Protective â†’ Concerned          â”‚
â”‚ â€¢ Scaling â†’ Excited               â”‚
â”‚ â€¢ Other â†’ Thoughtful              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generate Dynamic Title            â”‚
â”‚ â€¢ "Rex found a winning..."        â”‚
â”‚ â€¢ "Rex detected a problem..."     â”‚
â”‚ â€¢ "Rex spotted an optimization"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Format Data for Display           â”‚
â”‚ â€¢ Demographics                    â”‚
â”‚ â€¢ Geographic                      â”‚
â”‚ â€¢ Placements                      â”‚
â”‚ â€¢ Temporal                        â”‚
â”‚ â€¢ Customer Behavior               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Calculate Impact Projections      â”‚
â”‚ â€¢ Net revenue gain                â”‚
â”‚ â€¢ Net conversion gain             â”‚
â”‚ â€¢ Net profit gain                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Render View Based on Mode         â”‚
â”‚ â€¢ Simple: Top 3 segments          â”‚
â”‚ â€¢ Detailed: All breakdowns        â”‚
â”‚ â€¢ Flow: Analytical process        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display Actions with Priority     â”‚
â”‚ â€¢ Primary (first) â†’ Rose border   â”‚
â”‚ â€¢ Destructive â†’ Red accent        â”‚
â”‚ â€¢ Others â†’ Gray border            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Automation if Available      â”‚
â”‚ â€¢ Check if recommendedRule exists â”‚
â”‚ â€¢ Show contextual message         â”‚
â”‚ â€¢ Display rule summary            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Responsive Breakpoints

### Desktop (>= 1024px)
- Rex character on left side (fixed position)
- 3-column data grid
- All features visible
- Connection line from Rex to modal

### Tablet (768px - 1023px)
- Rex character above modal (smaller)
- 2-column data grid
- Actions remain full width
- Simplified flow diagram

### Mobile (< 768px)
- Small Rex avatar in header
- Single column layout
- Vertical everything
- Simplified interactions
- Touch-optimized button sizes

## Color System

### Rex Emotions
- **Excited**: Green gradient (`from-green-500 via-emerald-500 to-teal-500`)
- **Concerned**: Red/Orange gradient (`from-orange-500 via-red-500 to-rose-500`)
- **Thoughtful**: Rose gradient (`from-red-500 via-rose-500 to-orange-500`)

### Action Types
- **Primary**: Rose border (`border-rose-400`), gradient background
- **Destructive**: Red border (`border-red-300`), red accents
- **Secondary**: Gray border (`border-gray-200`), neutral

### Data Cards
- **Highlight**: Rose ring (`ring-2 ring-rose-500/30`)
- **Standard**: Gray border (`border-gray-200`)
- **Hover**: Shadow increase (`hover:shadow-lg`)

## Typography Scale

- **Hero Statement**: `text-lg` (18px), `font-semibold`
- **Section Headers**: `text-base` (16px), `font-semibold`
- **Body Text**: `text-[15px]` (15px), `font-normal`
- **Action Titles**: `text-base` (16px), `font-bold`
- **Small Text**: `text-sm` (14px), `text-xs` (12px)

## Animation States

### Rex Character
- **Idle**: Gentle floating, breathing
- **Excited**: Bounce animation
- **Concerned**: Pulse animation
- **On Action**: Celebration or approval

### Modal Elements
- **Card Hover**: Shadow + Scale
- **Action Hover**: Lift + Shadow increase
- **Button Click**: Press effect
- **View Toggle**: Smooth transition

## Key Interactions

1. **View Mode Toggle**: Switches between Simple/Detailed/Flow
2. **Action Click**: Executes action, shows loading state
3. **Create Rule**: Opens rule builder
4. **Dismiss**: Closes modal with optional reason
5. **Close**: Standard modal close

## State Management

```typescript
const [isProcessing, setIsProcessing] = useState(false);
const [viewMode, setViewMode] = useState<'simple' | 'detailed' | 'flow'>('simple');

// Derived state
const rexEmotion = /* calculated based on action type */
const netGainRevenue = /* calculated from projections */
const isPrimary = /* first action */
```

## Accessibility Features

- ARIA labels on all interactive elements
- Keyboard navigation support
- Focus visible states
- Color contrast meets WCAG AA
- Screen reader friendly structure
- Semantic HTML

## Performance Considerations

- Conditional rendering based on view mode
- Memoized calculations
- Lazy component loading opportunity
- Optimized re-renders
- CSS animations (GPU accelerated)
